<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GTTS</title>
  <meta name="description" content="GTTS: Navigation, Tolls, Fuel discounts, Hotels, Nearby places." />

  <style>
    :root{
      --bg:#0b1220;
      --panel:#020617;
      --panel2:#0a1020;
      --border:#1e293b;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --brand1:#0ea5e9;
      --brand2:#2563eb;
      --shadow:0 12px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    /* Topbar */
    .topbar{
      position:sticky; top:0; z-index:20;
      display:flex; align-items:center; gap:12px;
      padding:12px 14px;
      background:linear-gradient(135deg,var(--brand1),var(--brand2));
    }
    .iconbtn{
      border:1px solid rgba(255,255,255,.25);
      background:rgba(2,6,23,.25);
      color:var(--text);
      border-radius:10px;
      padding:10px 12px;
      cursor:pointer;
      font-weight:900;
    }
    .brand{display:flex; flex-direction:column; gap:2px}
    .logo{font-weight:1000; letter-spacing:.8px; font-size:20px}
    .subtitle{font-size:12px; opacity:.9}

    .right{
      margin-left:auto;
      display:flex; align-items:center; gap:10px;
    }
    .select{
      background:rgba(2,6,23,.35);
      color:var(--text);
      border:1px solid rgba(255,255,255,.25);
      border-radius:10px;
      padding:10px 10px;
      font-weight:800;
      max-width: 260px;
    }
    .btn{
      border:1px solid rgba(255,255,255,.25);
      background:rgba(2,6,23,.25);
      color:var(--text);
      border-radius:10px;
      padding:10px 12px;
      cursor:pointer;
      font-weight:900;
    }
    .btnGhost{
      border:1px solid rgba(148,163,184,.35);
      background:transparent;
      color:var(--text);
      border-radius:10px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:900;
    }

    /* Layout */
    .main{padding:16px}
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap:16px;
      max-width:1200px;
      margin:0 auto;
    }
    .card{
      background:var(--panel);
      border:1px solid var(--border);
      border-radius:16px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .cardHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:14px 14px 10px;
      border-bottom:1px solid rgba(30,41,59,.7);
    }
    .cardTitle{font-weight:1000; font-size:16px}
    .pill{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.35);
      color:var(--muted);
      font-weight:900;
      font-size:12px;
    }
    .map{
      height:520px;
      background:var(--panel2);
      position:relative;
    }
    .mapPlaceholder{
      position:absolute; inset:0;
      display:flex; flex-direction:column;
      align-items:center; justify-content:center;
      gap:10px;
      padding:16px;
      text-align:center;
      color:var(--muted);
    }
    .mapBig{font-size:42px}
    .mapText{max-width:440px}
    .mapBar{
      display:flex; gap:10px;
      padding:10px 14px;
      border-top:1px solid rgba(30,41,59,.7);
    }
    .small{font-size:12px; color:var(--muted)}
    .mono{font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}

    .view{padding:14px}
    .sectionTitle{font-weight:1000; font-size:18px; margin:0 0 10px}
    .hr{height:1px; background:rgba(30,41,59,.7); margin:14px 0}
    .list{display:flex; flex-direction:column; gap:10px}
    .item{
      border:1px solid rgba(30,41,59,.9);
      border-radius:14px;
      padding:12px;
      background:rgba(2,6,23,.35);
    }
    .itemTop{display:flex; justify-content:space-between; gap:10px; align-items:flex-start}
    .itemTitle{font-weight:1000}
    .itemSub{color:var(--muted); font-size:12px; margin-top:6px}
    .badge{
      border:1px solid rgba(56,189,248,.5);
      color:#bfe8ff;
      padding:4px 8px;
      border-radius:999px;
      font-size:12px;
      font-weight:900;
      white-space:nowrap;
    }
    .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
    .chip{
      border:1px solid rgba(148,163,184,.3);
      color:var(--text);
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:900;
    }

    .footer{
      max-width:1200px;
      margin:14px auto 0;
      display:flex; justify-content:space-between;
      gap:12px;
      padding:10px 6px;
      color:var(--muted);
    }

    /* Drawer */
    .drawer{
      position:fixed; top:0; left:0; height:100%;
      width:320px;
      background:rgba(2,6,23,.98);
      border-right:1px solid var(--border);
      transform:translateX(-110%);
      transition:transform .2s ease;
      z-index:60;
      display:flex; flex-direction:column;
    }
    .drawer.open{transform:translateX(0)}
    .drawerHeader{
      display:flex; justify-content:space-between; align-items:center;
      padding:14px;
      border-bottom:1px solid rgba(30,41,59,.7);
    }
    .drawerTitle{font-weight:1000; font-size:18px}
    .nav{padding:12px; display:flex; flex-direction:column; gap:10px}
    .navItem{
      width:100%;
      text-align:left;
      border:1px solid rgba(30,41,59,.9);
      background:rgba(2,6,23,.35);
      color:var(--text);
      border-radius:14px;
      padding:12px;
      cursor:pointer;
      font-weight:1000;
    }
    .navItem.active{border-color: rgba(56,189,248,.9)}
    .drawerFooter{
      margin-top:auto;
      padding:12px 14px;
      border-top:1px solid rgba(30,41,59,.7);
    }
    .backdrop{
      position:fixed; inset:0;
      background:rgba(0,0,0,.55);
      z-index:50;
      display:none;
    }
    .backdrop.show{display:block}

    /* Toast */
    .toast{
      position:fixed; left:50%; bottom:18px;
      transform:translateX(-50%);
      background:rgba(2,6,23,0.92);
      border:1px solid rgba(148,163,184,.35);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      font-weight:800;
      font-size:13px;
      max-width:92vw;
      box-shadow:var(--shadow);
      z-index:9999;
      opacity:0;
      pointer-events:none;
      transition:opacity .15s ease;
    }
    .toast.show{opacity:1}

    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
      .map{height:420px}
    }
  </style>
</head>

<body>
  <header class="topbar">
    <button id="btnMenu" class="iconbtn" aria-label="Open menu">‚ò∞</button>

    <div class="brand">
      <div class="logo">GTTS</div>
      <div class="subtitle" id="subTitle">Navigator ‚Ä¢ Tolls ‚Ä¢ Fuel ‚Ä¢ Hotels ‚Ä¢ Nearby</div>
    </div>

    <div class="right">
      <select id="lang" class="select" aria-label="Language"></select>
      <button id="btnLocate" class="btn">üìç <span id="tLocate">Locate</span></button>
    </div>
  </header>

  <aside id="drawer" class="drawer" aria-hidden="true">
    <div class="drawerHeader">
      <div class="drawerTitle">GTTS</div>
      <button id="btnClose" class="iconbtn" aria-label="Close menu">‚úï</button>
    </div>

    <nav class="nav">
      <button class="navItem" data-route="navigator">üß≠ <span id="tNavNav">Navigator</span></button>
      <button class="navItem" data-route="tolls">üõ£Ô∏è <span id="tNavTolls">Tolls</span></button>
      <button class="navItem" data-route="fuel">‚õΩ <span id="tNavFuel">Fuel</span></button>
      <button class="navItem" data-route="hotels">üè® <span id="tNavHotels">Hotels</span></button>
      <button class="navItem" data-route="nearby">üìå <span id="tNavNearby">Nearby</span></button>
    </nav>

    <div class="drawerFooter">
      <div class="small" id="tDrawerNote">MVP demo (no real payments).</div>
    </div>
  </aside>

  <div id="backdrop" class="backdrop"></div>

  <main class="main">
    <section class="grid">
      <div class="card">
        <div class="cardHeader">
          <div class="cardTitle" id="tMapTitle">Map</div>
          <div class="pill" id="pillStatus">Demo</div>
        </div>

        <div class="map">
          <div class="mapPlaceholder">
            <div class="mapBig">üó∫Ô∏è</div>
            <div class="mapText" id="tMapPlaceholder">
              Map placeholder. Click ‚ÄúLocate‚Äù to set your position, then browse modules.
            </div>
          </div>
        </div>

        <div class="mapBar">
          <span class="small" id="tCoordLabel">Coordinates:</span>
          <span class="mono" id="coord">‚Äî</span>
          <button id="btnShare" class="btnGhost" style="margin-left:auto;">üîó <span id="tShare">Share</span></button>
        </div>
      </div>

      <div class="card">
        <div class="cardHeader">
          <div class="cardTitle" id="viewTitle">‚Äî</div>
          <div class="pill" id="viewPill">MVP</div>
        </div>
        <div id="view" class="view"></div>
      </div>
    </section>

    <footer class="footer">
      <div>¬© 2026 GTTS</div>
      <div class="small" id="tDisclaimer">Prototype. Do not use for real payments.</div>
    </footer>
  </main>

  <div id="toast" class="toast"></div>

  <script>
    (function(){
      "use strict";

      // ---------- Helpers ----------
      function $(id){ return document.getElementById(id); }
      function $all(sel){ return Array.prototype.slice.call(document.querySelectorAll(sel)); }

      function toast(msg){
        var el = $("toast");
        el.textContent = String(msg || "");
        el.classList.add("show");
        clearTimeout(toast._t);
        toast._t = setTimeout(function(){ el.classList.remove("show"); }, 2000);
      }

      function safeGet(k){ try { return localStorage.getItem(k); } catch(e){ return null; } }
      function safeSet(k,v){ try { localStorage.setItem(k,v); } catch(e){} }

      function escapeHtml(s){
        return String(s)
          .replace(/&/g,"&amp;")
          .replace(/</g,"&lt;")
          .replace(/>/g,"&gt;")
          .replace(/"/g,"&quot;")
          .replace(/'/g,"&#039;");
      }

      // ---------- State ----------
      var KEY_LANG = "gtts_lang";
      var KEY_POS  = "gtts_pos";
      var ROUTES = ["navigator","tolls","fuel","hotels","nearby"];

      // ---------- i18n (–º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ, –∞–ª–µ —Å—Ç–∞–±—ñ–ª—å–Ω–æ) ----------
      var LANGS = [
        {code:"en", label:"English"},
        {code:"uk", label:"–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞"},
        {code:"ru", label:"–†—É—Å—Å–∫–∏–π"},
        {code:"pl", label:"Polski"},
        {code:"de", label:"Deutsch"},
        {code:"fr", label:"Fran√ßais"},
        {code:"es", label:"Espa√±ol"},
        {code:"it", label:"Italiano"},
        {code:"sv", label:"Svenska"},
        {code:"cs", label:"ƒåe≈°tina"},
        {code:"ro", label:"Rom√¢nƒÉ"},
        {code:"nl", label:"Nederlands"},
      ];

      var T = {
        en: {
          locate:"Locate", share:"Share", map:"Map",
          coord:"Coordinates:", disclaimer:"Prototype. Do not use for real payments.",
          note:"MVP demo (no real payments).",
          nav:"Navigator", tolls:"Tolls", fuel:"Fuel", hotels:"Hotels", nearby:"Nearby",
          mapPlaceholder:"Map placeholder. Click ‚ÄúLocate‚Äù to set your position, then browse modules.",
          posUnknown:"Unknown (click Locate)",
          demoRoute:"Route demo", demoPay:"Demo payment flow (stub).",
          demoFuel:"Demo fuel session (stub).",
          demoHotel:"Demo booking flow (stub).",
          demoNearby:"Demo route to place (stub).",
          ok:"OK",
        },
        uk: {
          locate:"–ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è", share:"–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å", map:"–ú–∞–ø–∞",
          coord:"–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏:", disclaimer:"–ü—Ä–æ—Ç–æ—Ç–∏–ø. –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω–∏—Ö –æ–ø–ª–∞—Ç.",
          note:"MVP –¥–µ–º–æ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –æ–ø–ª–∞—Ç).",
          nav:"–ù–∞–≤—ñ–≥–∞—Ç–æ—Ä", tolls:"–û–ø–ª–∞—Ç–∞ –¥–æ—Ä—ñ–≥", fuel:"–ó–∞–ø—Ä–∞–≤–∫–∞", hotels:"–ì–æ—Ç–µ–ª—ñ", nearby:"–ú—ñ—Å—Ü—è –ø–æ—Ä—É—á",
          mapPlaceholder:"–ó–∞–≥–ª—É—à–∫–∞ –º–∞–ø–∏. –ù–∞—Ç–∏—Å–Ω–∏ ‚Äú–ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è‚Äù, —â–æ–± –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–æ–∑–∏—Ü—ñ—é, —ñ –æ–±–∏—Ä–∞–π –º–æ–¥—É–ª—ñ.",
          posUnknown:"–ù–µ–≤—ñ–¥–æ–º–æ (–Ω–∞—Ç–∏—Å–Ω–∏ –ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è)",
          demoRoute:"–î–µ–º–æ –º–∞—Ä—à—Ä—É—Ç—É", demoPay:"–î–µ–º–æ –æ–ø–ª–∞—Ç–∏ –¥–æ—Ä—ñ–≥ (stub).",
          demoFuel:"–î–µ–º–æ –∑–∞–ø—Ä–∞–≤–∫–∏ (stub).",
          demoHotel:"–î–µ–º–æ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è (stub).",
          demoNearby:"–î–µ–º–æ –º–∞—Ä—à—Ä—É—Ç—É –¥–æ –º—ñ—Å—Ü—è (stub).",
          ok:"–û–ö",
        },
        ru: {
          locate:"–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è", share:"–ü–æ–¥–µ–ª–∏—Ç—å—Å—è", map:"–ö–∞—Ä—Ç–∞",
          coord:"–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:", disclaimer:"–ü—Ä–æ—Ç–æ—Ç–∏–ø. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–ø–ª–∞—Ç.",
          note:"MVP –¥–µ–º–æ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–ø–ª–∞—Ç).",
          nav:"–ù–∞–≤–∏–≥–∞—Ç–æ—Ä", tolls:"–û–ø–ª–∞—Ç–∞ –¥–æ—Ä–æ–≥", fuel:"–ó–∞–ø—Ä–∞–≤–∫–∞", hotels:"–û—Ç–µ–ª–∏", nearby:"–ú–µ—Å—Ç–∞ —Ä—è–¥–æ–º",
          mapPlaceholder:"–ó–∞–≥–ª—É—à–∫–∞ –∫–∞—Ä—Ç—ã. –ù–∞–∂–º–∏ ‚Äú–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è‚Äù, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é, –∏ –≤—ã–±–∏—Ä–∞–π –º–æ–¥—É–ª–∏.",
          posUnknown:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ (–Ω–∞–∂–º–∏ –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è)",
          demoRoute:"–î–µ–º–æ –º–∞—Ä—à—Ä—É—Ç–∞", demoPay:"–î–µ–º–æ –æ–ø–ª–∞—Ç—ã –¥–æ—Ä–æ–≥ (stub).",
          demoFuel:"–î–µ–º–æ –∑–∞–ø—Ä–∞–≤–∫–∏ (stub).",
          demoHotel:"–î–µ–º–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (stub).",
          demoNearby:"–î–µ–º–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∫ –º–µ—Å—Ç—É (stub).",
          ok:"–û–ö",
        }
      };

      // fallback: —è–∫—â–æ –º–æ–≤–∏ –Ω–µ–º–∞—î ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ EN
      function t(key){
        var lang = $("lang").value || "en";
        var dict = T[lang] || T.en;
        return (dict && dict[key]) ? dict[key] : (T.en[key] || key);
      }

      // ---------- Data (–≤–±—É–¥–æ–≤–∞–Ω–µ, —â–æ–± –Ω–µ –±—É–ª–æ 404) ----------
      var DEMO = {
        tolls: [
          { name:"A2 Demo Segment", from:"Poznan", to:"Warsaw", country:"PL", class:"N3", axles:5, estimate:"38.5 EUR" },
          { name:"A1 Demo Segment", from:"Lodz", to:"Gdansk", country:"PL", class:"N2", axles:4, estimate:"22.0 EUR" }
        ],
        fuel: [
          { name:"FuelStop A1", brand:"PartnerX", city:"Warsaw", discount:"-8%", price:"1.54 EUR/L" },
          { name:"TruckFuel Hub", brand:"PartnerY", city:"Lodz", discount:"-6%", price:"1.49 EUR/L" },
          { name:"Highway Diesel Point", brand:"PartnerZ", city:"Poznan", discount:"-7%", price:"1.57 EUR/L" }
        ],
        hotels: [
          { name:"Truck Rest Hotel", city:"Warsaw", type:"Motel", stars:3, parking:true },
          { name:"Highway Inn", city:"Lodz", type:"Hotel", stars:4, parking:true },
          { name:"City Sleep", city:"Poznan", type:"Hotel", stars:3, parking:false }
        ],
        nearby: [
          { name:"Old Town", city:"Warsaw", category:"Sightseeing", open:true },
          { name:"Museum of Transport", city:"Lodz", category:"Museum", open:false },
          { name:"City Park", city:"Poznan", category:"Nature", open:true }
        ]
      };

      // ---------- Drawer ----------
      function openDrawer(){
        $("drawer").classList.add("open");
        $("drawer").setAttribute("aria-hidden","false");
        $("backdrop").classList.add("show");
      }
      function closeDrawer(){
        $("drawer").classList.remove("open");
        $("drawer").setAttribute("aria-hidden","true");
        $("backdrop").classList.remove("show");
      }

      // ---------- Geolocation ----------
      function getPos(){
        var raw = safeGet(KEY_POS);
        if(!raw) return null;
        try { return JSON.parse(raw); } catch(e){ return null; }
      }
      function setPos(pos){
        safeSet(KEY_POS, JSON.stringify(pos));
        $("coord").textContent = pos.lat.toFixed(5)+", "+pos.lng.toFixed(5);
      }
      function locate(){
        $("pillStatus").textContent = "‚Ä¶";
        if(!navigator.geolocation){
          $("pillStatus").textContent = "Demo";
          toast("No geolocation available");
          return;
        }
        navigator.geolocation.getCurrentPosition(
          function(p){
            setPos({lat:p.coords.latitude, lng:p.coords.longitude});
            $("pillStatus").textContent = "OK";
            toast("Location set");
          },
          function(){
            $("pillStatus").textContent = "Demo";
            toast("Location denied / unavailable");
          },
          { enableHighAccuracy:true, timeout:10000, maximumAge:60000 }
        );
      }

      // ---------- Views ----------
      function setActive(route){
        $all(".navItem").forEach(function(btn){
          btn.classList.toggle("active", btn.getAttribute("data-route") === route);
        });
      }

      function render(route){
        if(ROUTES.indexOf(route) < 0) route = "navigator";
        setActive(route);

        $("viewPill").textContent = "MVP";
        $("viewTitle").textContent =
          route === "navigator" ? t("nav") :
          route === "tolls" ? t("tolls") :
          route === "fuel" ? t("fuel") :
          route === "hotels" ? t("hotels") :
          t("nearby");

        var pos = getPos();
        if(pos) $("coord").textContent = pos.lat.toFixed(5)+", "+pos.lng.toFixed(5);

        if(route === "navigator"){
          var posText = pos ? (pos.lat.toFixed(5)+", "+pos.lng.toFixed(5)) : t("posUnknown");
          $("view").innerHTML =
            '<h3 class="sectionTitle">'+escapeHtml(t("nav"))+'</h3>'+
            '<div class="item">'+
              '<div class="itemTitle">Best navigators (shortlist)</div>'+
              '<div class="itemSub">We will integrate multiple providers and choose best per route.</div>'+
              '<div class="row">'+
                '<span class="chip">Google Maps</span><span class="chip">Waze</span><span class="chip">HERE WeGo</span><span class="chip">TomTom</span><span class="chip">Sygic</span>'+
              '</div>'+
            '</div>'+
            '<div class="hr"></div>'+
            '<div class="item">'+
              '<div class="itemTitle">Position</div>'+
              '<div class="itemSub">'+escapeHtml(posText)+'</div>'+
              '<div class="row"><button class="btn" id="btnRouteDemo">‚ñ∂ '+escapeHtml(t("demoRoute"))+'</button></div>'+
            '</div>';

          $("btnRouteDemo").addEventListener("click", function(){ toast("Route flow (demo)"); });
          return;
        }

        if(route === "tolls"){
          var list = DEMO.tolls.map(function(r){
            return ''+
              '<div class="item">'+
                '<div class="itemTop">'+
                  '<div>'+
                    '<div class="itemTitle">'+escapeHtml(r.name)+'</div>'+
                    '<div class="itemSub">'+escapeHtml(r.from)+' ‚Üí '+escapeHtml(r.to)+'</div>'+
                  '</div>'+
                  '<div class="badge">'+escapeHtml(r.estimate)+'</div>'+
                '</div>'+
                '<div class="row">'+
                  '<span class="chip">Class: '+escapeHtml(r.class)+'</span>'+
                  '<span class="chip">Axles: '+escapeHtml(String(r.axles))+'</span>'+
                  '<span class="chip">Country: '+escapeHtml(r.country)+'</span>'+
                '</div>'+
                '<div class="row"><button class="btn payBtn">üõ£Ô∏è '+escapeHtml(t("tolls"))+'</button></div>'+
              '</div>';
          }).join("");
          $("view").innerHTML =
            '<h3 class="sectionTitle">'+escapeHtml(t("tolls"))+'</h3>'+
            '<div class="item"><div class="itemTitle">EETS-ready (phase)</div><div class="itemSub">Demo only. Next: partner integration.</div></div>'+
            '<div class="hr"></div><div class="list">'+list+'</div>';

          $all(".payBtn").forEach(function(b){
            b.addEventListener("click", function(){ toast(t("demoPay")); });
          });
          return;
        }

        if(route === "fuel"){
          var listF = DEMO.fuel.map(function(s){
            return ''+
              '<div class="item">'+
                '<div class="itemTop">'+
                  '<div>'+
                    '<div class="itemTitle">'+escapeHtml(s.name)+'</div>'+
                    '<div class="itemSub">'+escapeHtml(s.city)+' ‚Ä¢ '+escapeHtml(s.brand)+'</div>'+
                  '</div>'+
                  '<div class="badge">'+escapeHtml(s.discount)+'</div>'+
                '</div>'+
                '<div class="row">'+
                  '<span class="chip">Price: '+escapeHtml(s.price)+'</span>'+
                  '<span class="chip">Discount system</span>'+
                '</div>'+
                '<div class="row"><button class="btn fuelBtn">‚õΩ '+escapeHtml(t("fuel"))+'</button><button class="btnGhost creditBtn">üí≥ Credit</button></div>'+
              '</div>';
          }).join("");
          $("view").innerHTML =
            '<h3 class="sectionTitle">'+escapeHtml(t("fuel"))+'</h3>'+
            '<div class="item"><div class="itemTitle">Discounted fuel</div><div class="itemSub">UTA/DKV/E100-like demo.</div></div>'+
            '<div class="hr"></div><div class="list">'+listF+'</div>';

          $all(".fuelBtn").forEach(function(b){ b.addEventListener("click", function(){ toast(t("demoFuel")); }); });
          $all(".creditBtn").forEach(function(b){ b.addEventListener("click", function(){ toast("Credit (coming soon)"); }); });
          return;
        }

        if(route === "hotels"){
          var listH = DEMO.hotels.map(function(h){
            var stars = new Array((h.stars||3)+1).join("‚òÖ");
            return ''+
              '<div class="item">'+
                '<div class="itemTop">'+
                  '<div>'+
                    '<div class="itemTitle">'+escapeHtml(h.name)+'</div>'+
                    '<div class="itemSub">'+escapeHtml(h.city)+' ‚Ä¢ '+escapeHtml(h.type)+'</div>'+
                  '</div>'+
                  '<div class="badge">'+escapeHtml(stars)+'</div>'+
                '</div>'+
                '<div class="row">'+
                  '<span class="chip">Truck parking: '+(h.parking ? "Yes":"No")+'</span>'+
                  '<span class="chip">Driver rest</span>'+
                '</div>'+
                '<div class="row"><button class="btn hotelBtn">üè® '+escapeHtml(t("hotels"))+'</button></div>'+
              '</div>';
          }).join("");
          $("view").innerHTML =
            '<h3 class="sectionTitle">'+escapeHtml(t("hotels"))+'</h3>'+
            '<div class="item"><div class="itemTitle">Driver rest</div><div class="itemSub">Demo list. Next: partner booking API.</div></div>'+
            '<div class="hr"></div><div class="list">'+listH+'</div>';

          $all(".hotelBtn").forEach(function(b){ b.addEventListener("click", function(){ toast(t("demoHotel")); }); });
          return;
        }

        if(route === "nearby"){
          var listN = DEMO.nearby.map(function(p){
            return ''+
              '<div class="item">'+
                '<div class="itemTop">'+
                  '<div>'+
                    '<div class="itemTitle">'+escapeHtml(p.name)+'</div>'+
                    '<div class="itemSub">'+escapeHtml(p.category)+' ‚Ä¢ '+escapeHtml(p.city)+'</div>'+
                  '</div>'+
                  '<div class="badge">'+(p.open ? "Open":"Closed")+'</div>'+
                '</div>'+
                '<div class="row">'+
                  '<span class="chip">Tourism</span>'+
                  '<span class="chip">Near you (demo)</span>'+
                '</div>'+
                '<div class="row"><button class="btn nearBtn">üß≠ '+escapeHtml(t("nearby"))+'</button></div>'+
              '</div>';
          }).join("");
          $("view").innerHTML =
            '<h3 class="sectionTitle">'+escapeHtml(t("nearby"))+'</h3>'+
            '<div class="item"><div class="itemTitle">Places nearby</div><div class="itemSub">Demo. Next: Places API.</div></div>'+
            '<div class="hr"></div><div class="list">'+listN+'</div>';

          $all(".nearBtn").forEach(function(b){ b.addEventListener("click", function(){ toast(t("demoNearby")); }); });
          return;
        }
      }

      // ---------- Language UI ----------
      function buildLangSelect(){
        var sel = $("lang");
        sel.innerHTML = "";
        LANGS.forEach(function(l){
          var opt = document.createElement("option");
          opt.value = l.code;
          opt.textContent = l.label;
          sel.appendChild(opt);
        });

        var saved = safeGet(KEY_LANG);
        var auto = (navigator.language || "en").toLowerCase();
        auto = auto.indexOf("-") > -1 ? auto.split("-")[0] : auto;
        if(auto === "ua") auto = "uk";

        var initial = saved || auto || "en";
        var has = LANGS.some(function(x){ return x.code === initial; });
        sel.value = has ? initial : "en";
      }

      function applyTexts(){
        $("tLocate").textContent = t("locate");
        $("tShare").textContent = t("share");
        $("tMapTitle").textContent = t("map");
        $("tMapPlaceholder").textContent = t("mapPlaceholder");
        $("tCoordLabel").textContent = t("coord");
        $("tDisclaimer").textContent = t("disclaimer");
        $("tDrawerNote").textContent = t("note");

        $("tNavNav").textContent = t("nav");
        $("tNavTolls").textContent = t("tolls");
        $("tNavFuel").textContent = t("fuel");
        $("tNavHotels").textContent = t("hotels");
        $("tNavNearby").textContent = t("nearby");
      }

      // ---------- Share ----------
      function shareLink(){
        var url = location.href;
        if(navigator.clipboard && navigator.clipboard.writeText){
          navigator.clipboard.writeText(url).then(function(){ toast("Copied"); })
            .catch(function(){ prompt("Copy link:", url); });
        } else {
          prompt("Copy link:", url);
        }
      }

      // ---------- Init ----------
      function init(){
        buildLangSelect();
        applyTexts();

        // restore position
        var pos = getPos();
        if(pos) $("coord").textContent = pos.lat.toFixed(5)+", "+pos.lng.toFixed(5);

        // events
        $("btnMenu").addEventListener("click", openDrawer);
        $("btnClose").addEventListener("click", closeDrawer);
        $("backdrop").addEventListener("click", closeDrawer);

        $all(".navItem").forEach(function(btn){
          btn.addEventListener("click", function(){
            var route = btn.getAttribute("data-route") || "navigator";
            closeDrawer();
            location.hash = "#"+route;
            render(route);
          });
        });

        $("btnLocate").addEventListener("click", locate);
        $("btnShare").addEventListener("click", shareLink);

        $("lang").addEventListener("change", function(e){
          safeSet(KEY_LANG, e.target.value);
          applyTexts();
          render(getRouteFromHash());
        });

        window.addEventListener("hashchange", function(){
          render(getRouteFromHash());
        });

        // start
        $("pillStatus").textContent = "Demo";
        render(getRouteFromHash());
      }

      function getRouteFromHash(){
        var h = (location.hash || "").replace("#","");
        return ROUTES.indexOf(h) >= 0 ? h : "navigator";
      }

      init();
    })();
  </script>
</body>
</html>
