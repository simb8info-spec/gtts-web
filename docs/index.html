<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GTTS</title>
  <meta name="description" content="GTTS: Vehicle ‚Ä¢ Navigator ‚Ä¢ Tolls ‚Ä¢ Fuel ‚Ä¢ Hotels ‚Ä¢ Nearby" />
  <meta name="color-scheme" content="dark" />

  <style>
    :root{
      --bg:#0b1220;
      --panel:#020617;
      --panel2:#0a1020;
      --border:#1e293b;
      --text:#e5e7eb;
      --muted:#94a3b8;
      --brand1:#0ea5e9;
      --brand2:#2563eb;
      --shadow:0 12px 30px rgba(0,0,0,.35);

      /* refined red on light-blue background, wide border */
      --iconBg:#BFE6FF;
      --iconBorder:#0B2A3D;
      --iconRed1:#B11226;
      --iconRed2:#E11D48;
      --iconRed3:#7F0B1A;
      --iconHi:#FFD1D9;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    .topbar{
      position:sticky; top:0; z-index:20;
      display:flex; align-items:center; gap:12px;
      padding:12px 14px;
      background:linear-gradient(135deg,var(--brand1),var(--brand2));
    }
    .iconbtn{
      border:1px solid rgba(255,255,255,.25);
      background:rgba(2,6,23,.25);
      color:var(--text);
      border-radius:10px;
      padding:10px 12px;
      cursor:pointer;
      font-weight:900;
    }
    .brand{display:flex; flex-direction:column; gap:2px}
    .logo{font-weight:1000; letter-spacing:.8px; font-size:20px}
    .subtitle{font-size:12px; opacity:.9}

    .right{margin-left:auto; display:flex; align-items:center; gap:10px}
    .select{
      background:rgba(2,6,23,.35);
      color:var(--text);
      border:1px solid rgba(255,255,255,.25);
      border-radius:10px;
      padding:10px 10px;
      font-weight:800;
      max-width:280px;
    }
    .btn{
      border:1px solid rgba(255,255,255,.25);
      background:rgba(2,6,23,.25);
      color:var(--text);
      border-radius:10px;
      padding:10px 12px;
      cursor:pointer;
      font-weight:900;
    }
    .btnGhost{
      border:1px solid rgba(148,163,184,.35);
      background:transparent;
      color:var(--text);
      border-radius:10px;
      padding:8px 10px;
      cursor:pointer;
      font-weight:900;
    }

    .main{padding:16px}
    .grid{
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap:16px;
      max-width:1200px;
      margin:0 auto;
    }
    .card{
      background:var(--panel);
      border:1px solid var(--border);
      border-radius:16px;
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .cardHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:14px 14px 10px;
      border-bottom:1px solid rgba(30,41,59,.7);
    }
    .cardTitle{font-weight:1000; font-size:16px}
    .pill{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.35);
      color:var(--muted);
      font-weight:900;
      font-size:12px;
      white-space:nowrap;
    }

    .map{
      height:520px;
      background:var(--panel2);
      position:relative;
    }
    .mapPlaceholder{
      position:absolute; inset:0;
      display:flex; flex-direction:column;
      align-items:center; justify-content:center;
      gap:10px;
      padding:16px;
      text-align:center;
      color:var(--muted);
    }
    .mapBig{font-size:42px}
    .mapText{max-width:520px}

    .mapBar{
      display:flex; gap:10px; align-items:center;
      padding:10px 14px;
      border-top:1px solid rgba(30,41,59,.7);
    }
    .small{font-size:12px; color:var(--muted)}
    .mono{font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}

    .view{padding:14px}
    .sectionTitle{font-weight:1000; font-size:18px; margin:0 0 10px}
    .hr{height:1px; background:rgba(30,41,59,.7); margin:14px 0}
    .list{display:flex; flex-direction:column; gap:10px}
    .item{
      border:1px solid rgba(30,41,59,.9);
      border-radius:14px;
      padding:12px;
      background:rgba(2,6,23,.35);
    }
    .itemTop{display:flex; justify-content:space-between; gap:10px; align-items:flex-start}
    .itemTitle{font-weight:1000}
    .itemSub{color:var(--muted); font-size:12px; margin-top:6px}
    .badge{
      border:1px solid rgba(56,189,248,.5);
      color:#bfe8ff;
      padding:4px 8px;
      border-radius:999px;
      font-size:12px;
      font-weight:900;
      white-space:nowrap;
    }
    .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
    .chip{
      border:1px solid rgba(148,163,184,.3);
      color:var(--text);
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:900;
    }

    .field{
      display:grid;
      grid-template-columns: 240px 1fr;
      gap:10px;
      align-items:center;
      margin:10px 0;
    }
    .label{color:var(--muted); font-size:12px; font-weight:900}
    .input{
      width:100%;
      background:rgba(2,6,23,.5);
      color:var(--text);
      border:1px solid rgba(148,163,184,.25);
      border-radius:10px;
      padding:10px 10px;
      font-weight:900;
      outline:none;
    }
    select.input{appearance:auto}

    .hint{color:var(--muted); font-size:12px; margin-top:8px; line-height:1.35}

    .footer{
      max-width:1200px;
      margin:14px auto 0;
      display:flex; justify-content:space-between;
      gap:12px;
      padding:10px 6px;
      color:var(--muted);
    }

    .drawer{
      position:fixed; top:0; left:0; height:100%;
      width:320px;
      background:rgba(2,6,23,.98);
      border-right:1px solid var(--border);
      transform:translateX(-110%);
      transition:transform .2s ease;
      z-index:60;
      display:flex; flex-direction:column;
    }
    .drawer.open{transform:translateX(0)}
    .drawerHeader{
      display:flex; justify-content:space-between; align-items:center;
      padding:14px;
      border-bottom:1px solid rgba(30,41,59,.7);
    }
    .drawerTitle{font-weight:1000; font-size:18px}
    .nav{padding:12px; display:flex; flex-direction:column; gap:10px}
    .navItem{
      width:100%;
      text-align:left;
      border:1px solid rgba(30,41,59,.9);
      background:rgba(2,6,23,.35);
      color:var(--text);
      border-radius:14px;
      padding:12px;
      cursor:pointer;
      font-weight:1000;
    }
    .navItem.active{border-color: rgba(56,189,248,.9)}
    .drawerFooter{
      margin-top:auto;
      padding:12px 14px;
      border-top:1px solid rgba(30,41,59,.7);
    }
    .backdrop{
      position:fixed; inset:0;
      background:rgba(0,0,0,.55);
      z-index:50;
      display:none;
    }
    .backdrop.show{display:block}

    .toast{
      position:fixed; left:50%; bottom:18px;
      transform:translateX(-50%);
      background:rgba(2,6,23,0.92);
      border:1px solid rgba(148,163,184,.35);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      font-weight:900;
      font-size:13px;
      max-width:92vw;
      box-shadow:var(--shadow);
      z-index:9999;
      opacity:0;
      pointer-events:none;
      transition:opacity .15s ease;
    }
    .toast.show{opacity:1}

    /* Custom vehicle-type dropdown (supports icons) */
    .vselect{position:relative}
    .vselectBtn{
      width:100%;
      display:flex; align-items:center; gap:12px;
      background:rgba(2,6,23,.5);
      border:1px solid rgba(148,163,184,.25);
      border-radius:10px;
      padding:10px 10px;
      cursor:pointer;
      color:var(--text);
      font-weight:900;
    }
    .vselectBtn:focus{outline:2px solid rgba(56,189,248,.5); outline-offset:2px}

    /* 2 cm x 2 cm approx at 96dpi => ~76px */
    .vselectThumb{
      width:76px; height:76px; flex:0 0 auto;
      border-radius:14px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(148,163,184,.18);
      display:flex; align-items:center; justify-content:center;
      overflow:hidden;
    }
    .vselectThumb svg{width:76px; height:76px; display:block}

    .vselectText{display:flex; flex-direction:column; gap:4px; flex:1}
    .vselectCode{font-size:12px; color:var(--muted); font-weight:900}
    .vselectLabel{font-size:13px; font-weight:1000}
    .vselectCaret{margin-left:auto; color:var(--muted)}
    .vselectMenu{
      position:absolute; left:0; right:0; top:calc(100% + 8px);
      background:rgba(2,6,23,.98);
      border:1px solid rgba(148,163,184,.25);
      border-radius:12px;
      box-shadow:var(--shadow);
      max-height:380px;
      overflow:auto;
      z-index:999;
      padding:8px;
      display:none;
    }
    .vselect.open .vselectMenu{display:block}
    .vgroup{
      padding:10px 8px 6px;
      color:var(--muted);
      font-weight:1000;
      font-size:12px;
    }
    .vopt{
      display:flex; align-items:center; gap:12px;
      padding:10px 8px;
      border-radius:12px;
      cursor:pointer;
      border:1px solid transparent;
    }
    .vopt:hover{background:rgba(255,255,255,.06)}
    .vopt.active{border-color:rgba(56,189,248,.55); background:rgba(56,189,248,.08)}
    .vopt .vselectThumb{width:76px; height:76px}

    /* Trailer toggle button */
    .toggleBtn{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(148,163,184,.35);
      background:rgba(2,6,23,.35);
      color:var(--text);
      cursor:pointer;
      font-weight:1000;
    }
    .toggleDot{
      width:14px; height:14px;
      border-radius:999px;
      border:2px solid rgba(148,163,184,.45);
      background:transparent;
    }
    .toggleBtn.on{
      border-color: rgba(56,189,248,.7);
      background: rgba(56,189,248,.10);
    }
    .toggleBtn.on .toggleDot{
      background: rgba(56,189,248,.9);
      border-color: rgba(56,189,248,.9);
    }

    @media (max-width: 980px){
      .grid{grid-template-columns:1fr}
      .map{height:420px}
      .field{grid-template-columns: 1fr}
      .vselectThumb{width:72px; height:72px}
      .vselectThumb svg{width:72px; height:72px}
      .vopt .vselectThumb{width:72px; height:72px}
    }
  </style>
</head>

<body>
  <header class="topbar">
    <button id="btnMenu" class="iconbtn" aria-label="Open menu">‚ò∞</button>

    <div class="brand">
      <div class="logo">GTTS</div>
      <div class="subtitle" id="subTitle">Vehicle ‚Ä¢ Navigator ‚Ä¢ Tolls ‚Ä¢ Fuel ‚Ä¢ Hotels ‚Ä¢ Nearby</div>
    </div>

    <div class="right">
      <select id="lang" class="select" aria-label="Language"></select>
      <button id="btnLocate" class="btn">üìç <span id="tLocate">–ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è</span></button>
    </div>
  </header>

  <aside id="drawer" class="drawer" aria-hidden="true">
    <div class="drawerHeader">
      <div class="drawerTitle">GTTS</div>
      <button id="btnClose" class="iconbtn" aria-label="Close menu">‚úï</button>
    </div>

    <nav class="nav">
      <button class="navItem" data-route="vehicle">üöó <span id="tNavVehicle">–ê–≤—Ç–æ–º–æ–±—ñ–ª—å</span></button>
      <button class="navItem" data-route="navigator">üß≠ <span id="tNavNav">–ù–∞–≤—ñ–≥–∞—Ç–æ—Ä</span></button>
      <button class="navItem" data-route="tolls">üõ£Ô∏è <span id="tNavTolls">–û–ø–ª–∞—Ç–∞ –¥–æ—Ä—ñ–≥</span></button>
      <button class="navItem" data-route="fuel">‚õΩ <span id="tNavFuel">–ó–∞–ø—Ä–∞–≤–∫–∞</span></button>
      <button class="navItem" data-route="hotels">üè® <span id="tNavHotels">–ì–æ—Ç–µ–ª—ñ</span></button>
      <button class="navItem" data-route="nearby">üìå <span id="tNavNearby">–ú—ñ—Å—Ü—è –ø–æ—Ä—É—á</span></button>
    </nav>

    <div class="drawerFooter">
      <div class="small" id="tDrawerNote">MVP –¥–µ–º–æ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –æ–ø–ª–∞—Ç).</div>
    </div>
  </aside>

  <div id="backdrop" class="backdrop"></div>

  <main class="main">
    <section class="grid">
      <div class="card">
        <div class="cardHeader">
          <div class="cardTitle" id="tMapTitle">–ú–∞–ø–∞</div>
          <div class="pill" id="pillStatus">Demo</div>
        </div>

        <div class="map">
          <div class="mapPlaceholder">
            <div class="mapBig">üó∫Ô∏è</div>
            <div class="mapText" id="tMapPlaceholder">
              –ó–∞–≥–ª—É—à–∫–∞ –º–∞–ø–∏. –ù–∞—Ç–∏—Å–Ω–∏ ‚Äú–ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è‚Äù, —â–æ–± –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–æ–∑–∏—Ü—ñ—é, —ñ –æ–±–∏—Ä–∞–π –º–æ–¥—É–ª—ñ.
            </div>
          </div>
        </div>

        <div class="mapBar">
          <span class="small" id="tCoordLabel">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏:</span>
          <span class="mono" id="coord">‚Äî</span>
          <button id="btnShare" class="btnGhost" style="margin-left:auto;">üîó <span id="tShare">–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å</span></button>
        </div>
      </div>

      <div class="card">
        <div class="cardHeader">
          <div class="cardTitle" id="viewTitle">‚Äî</div>
          <div class="pill" id="viewPill">MVP</div>
        </div>
        <div id="view" class="view"></div>
      </div>
    </section>

    <footer class="footer">
      <div>¬© 2026 GTTS</div>
      <div class="small" id="tDisclaimer">–ü—Ä–æ—Ç–æ—Ç–∏–ø. –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω–∏—Ö –æ–ø–ª–∞—Ç.</div>
    </footer>
  </main>

  <div id="toast" class="toast"></div>

  <script>
    (function(){
      "use strict";

      function $(id){ return document.getElementById(id); }
      function $all(sel){ return Array.prototype.slice.call(document.querySelectorAll(sel)); }

      function toast(msg){
        var el = $("toast");
        el.textContent = String(msg || "");
        el.classList.add("show");
        clearTimeout(toast._t);
        toast._t = setTimeout(function(){ el.classList.remove("show"); }, 2000);
      }

      function safeGet(k){ try { return localStorage.getItem(k); } catch(e){ return null; } }
      function safeSet(k,v){ try { localStorage.setItem(k,v); } catch(e){} }

      function escapeHtml(s){
        return String(s)
          .replace(/&/g,"&amp;")
          .replace(/</g,"&lt;")
          .replace(/>/g,"&gt;")
          .replace(/"/g,"&quot;")
          .replace(/'/g,"&#039;");
      }

      var KEY_LANG = "gtts_lang";
      var KEY_POS  = "gtts_pos";
      var KEY_VEH  = "gtts_vehicle";

      var ROUTES = ["vehicle","navigator","tolls","fuel","hotels","nearby"];

      var LANGS = [
        {code:"en", label:"English"},
        {code:"uk", label:"–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞"},
        {code:"ru", label:"–†—É—Å—Å–∫–∏–π"},
        {code:"pl", label:"Polski"},
        {code:"de", label:"Deutsch"},
        {code:"fr", label:"Fran√ßais"},
        {code:"es", label:"Espa√±ol"},
        {code:"it", label:"Italiano"},
        {code:"sv", label:"Svenska"},
        {code:"cs", label:"ƒåe≈°tina"},
        {code:"ro", label:"Rom√¢nƒÉ"},
        {code:"nl", label:"Nederlands"},
      ];

      /* i18n */
      var I18N = {
        en: {
          locate:"Locate", share:"Share", map:"Map",
          coord:"Coordinates:", disclaimer:"Prototype. Do not use for real payments.",
          note:"MVP demo (no real payments).",
          vehicle:"Vehicle", vehicleTitle:"Vehicle profile",
          vehicleDesc:"Vehicle parameters used for tolls, fuel and compliance.",
          plate:"Plate number",
          country:"Country",
          type:"Vehicle type (EU)",
          fuelType:"Fuel type",
          emission:"Emission class",
          axles:"Axles",
          save:"Save",
          reset:"Reset to demo",
          saved:"Saved",
          resetDone:"Reset",
          reqHint:"Tip: Axles are important for heavy vehicles and vehicles with trailers.",
          nav:"Navigator", tolls:"Tolls", fuel:"Fuel", hotels:"Hotels", nearby:"Nearby",
          mapPlaceholder:"Map placeholder. Click ‚ÄúLocate‚Äù to set your position, then browse modules.",
          posUnknown:"Unknown (click Locate)",
          demoPay:"Demo toll payment (stub).",
          demoFuel:"Demo fuel session (stub).",
          demoHotel:"Demo booking (stub).",
          demoNearby:"Demo route to place (stub).",
          /* groups */
          gL:"L (mopeds & motorcycles)",
          gM:"M (passenger)",
          gN:"N (goods)",
          /* generic */
          select:"Select‚Ä¶",
          /* fuels */
          f_diesel:"Diesel",
          f_petrol:"Petrol",
          f_lpg:"LPG",
          f_cng:"CNG",
          f_lng:"LNG",
          f_electric:"Electric",
          f_hydrogen:"Hydrogen",
          f_hybrid:"Hybrid",
          /* eco */
          e_euro0:"Euro 0 / Unknown",
          e_euro1:"Euro 1",
          e_euro2:"Euro 2",
          e_euro3:"Euro 3",
          e_euro4:"Euro 4",
          e_euro5:"Euro 5",
          e_euro6:"Euro 6",
          e_euro6d:"Euro 6d",
          e_euroVI:"Euro VI (HDV)",
          /* axles */
          a_2:"2", a_3:"3", a_4:"4", a_5:"5", a_6:"6", a_7:"7", a_8:"8", a_9:"9", a_10:"10+",
          /* countries (EU + UK/UA) */
          c_PL:"Poland", c_DE:"Germany", c_FR:"France", c_ES:"Spain", c_IT:"Italy", c_NL:"Netherlands", c_BE:"Belgium",
          c_LU:"Luxembourg", c_AT:"Austria", c_CZ:"Czechia", c_SK:"Slovakia", c_HU:"Hungary", c_RO:"Romania",
          c_BG:"Bulgaria", c_HR:"Croatia", c_SI:"Slovenia", c_LT:"Lithuania", c_LV:"Latvia", c_EE:"Estonia",
          c_FI:"Finland", c_SE:"Sweden", c_DK:"Denmark", c_IE:"Ireland", c_PT:"Portugal", c_GR:"Greece",
          c_CY:"Cyprus", c_MT:"Malta",
          c_UK:"United Kingdom",
          c_UA:"Ukraine",
          /* trailer + weights */
          withTrailer:"With trailer",
          trailerPlate:"Trailer plate number",
          gvwr:"Gross vehicle weight (GVW)",
          gtw:"Gross trailer weight (GTW)",
          w_35:"‚â§ 3.5 t",
          w_3575:"3.5‚Äì7.5 t",
          w_7512:"7.5‚Äì12 t",
          w_12p:"> 12 t"
        },
        uk: {
          locate:"–ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è", share:"–ü–æ–¥—ñ–ª–∏—Ç–∏—Å—å", map:"–ú–∞–ø–∞",
          coord:"–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏:", disclaimer:"–ü—Ä–æ—Ç–æ—Ç–∏–ø. –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω–∏—Ö –æ–ø–ª–∞—Ç.",
          note:"MVP –¥–µ–º–æ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –æ–ø–ª–∞—Ç).",
          vehicle:"–ê–≤—Ç–æ–º–æ–±—ñ–ª—å", vehicleTitle:"–ü—Ä–æ—Ñ—ñ–ª—å –∞–≤—Ç–æ–º–æ–±—ñ–ª—è",
          vehicleDesc:"–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∞–≤—Ç–æ –¥–ª—è –æ–ø–ª–∞—Ç–∏ –¥–æ—Ä—ñ–≥, –∑–∞–ø—Ä–∞–≤–∫–∏ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ.",
          plate:"–ù–æ–º–µ—Ä",
          country:"–ö—Ä–∞—ó–Ω–∞",
          type:"–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –∑–∞—Å–æ–±—É (–Ñ–°)",
          fuelType:"–¢–∏–ø –ø–∞–ª—å–Ω–æ–≥–æ",
          emission:"–ï–∫–æ-–∫–ª–∞—Å",
          axles:"–ö—ñ–ª—å–∫—ñ—Å—Ç—å –æ—Å–µ–π",
          save:"–ó–±–µ—Ä–µ–≥—Ç–∏",
          reset:"–°–∫–∏–Ω—É—Ç–∏ –¥–µ–º–æ",
          saved:"–ó–±–µ—Ä–µ–∂–µ–Ω–æ",
          resetDone:"–°–∫–∏–Ω—É—Ç–æ",
          reqHint:"–ü–æ—Ä–∞–¥–∞: –û—Å—ñ –≤–∞–∂–ª–∏–≤—ñ –¥–ª—è –≤–∞–∂–∫–∏—Ö –¢–ó —Ç–∞ –¢–ó –∑ –ø—Ä–∏—á–µ–ø–∞–º–∏.",
          nav:"–ù–∞–≤—ñ–≥–∞—Ç–æ—Ä", tolls:"–û–ø–ª–∞—Ç–∞ –¥–æ—Ä—ñ–≥", fuel:"–ó–∞–ø—Ä–∞–≤–∫–∞", hotels:"–ì–æ—Ç–µ–ª—ñ", nearby:"–ú—ñ—Å—Ü—è –ø–æ—Ä—É—á",
          mapPlaceholder:"–ó–∞–≥–ª—É—à–∫–∞ –º–∞–ø–∏. –ù–∞—Ç–∏—Å–Ω–∏ ‚Äú–ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è‚Äù, —â–æ–± –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–æ–∑–∏—Ü—ñ—é, —ñ –æ–±–∏—Ä–∞–π –º–æ–¥—É–ª—ñ.",
          posUnknown:"–ù–µ–≤—ñ–¥–æ–º–æ (–Ω–∞—Ç–∏—Å–Ω–∏ –ì–µ–æ–ª–æ–∫–∞—Ü—ñ—è)",
          demoPay:"–î–µ–º–æ –æ–ø–ª–∞—Ç–∏ –¥–æ—Ä—ñ–≥ (stub).",
          demoFuel:"–î–µ–º–æ –∑–∞–ø—Ä–∞–≤–∫–∏ (stub).",
          demoHotel:"–î–µ–º–æ –±—Ä–æ–Ω—é–≤–∞–Ω–Ω—è (stub).",
          demoNearby:"–î–µ–º–æ –º–∞—Ä—à—Ä—É—Ç—É –¥–æ –º—ñ—Å—Ü—è (stub).",
          gL:"L (–º–æ–ø–µ–¥–∏ —Ç–∞ –º–æ—Ç–æ—Ü–∏–∫–ª–∏)",
          gM:"M (–ø–∞—Å–∞–∂–∏—Ä—Å—å–∫—ñ)",
          gN:"N (–≤–∞–Ω—Ç–∞–∂–Ω—ñ)",
          select:"–û–±–µ—Ä—ñ—Ç—å‚Ä¶",
          f_diesel:"–î–∏–∑–µ–ª—å",
          f_petrol:"–ë–µ–Ω–∑–∏–Ω",
          f_lpg:"LPG (–≥–∞–∑)",
          f_cng:"CNG (–º–µ—Ç–∞–Ω)",
          f_lng:"LNG (–∑—Ä—ñ–¥–∂. –≥–∞–∑)",
          f_electric:"–ï–ª–µ–∫—Ç—Ä–æ",
          f_hydrogen:"–í–æ–¥–µ–Ω—å",
          f_hybrid:"–ì—ñ–±—Ä–∏–¥",
          e_euro0:"Euro 0 / –ù–µ–≤—ñ–¥–æ–º–æ",
          e_euro1:"Euro 1",
          e_euro2:"Euro 2",
          e_euro3:"Euro 3",
          e_euro4:"Euro 4",
          e_euro5:"Euro 5",
          e_euro6:"Euro 6",
          e_euro6d:"Euro 6d",
          e_euroVI:"Euro VI (HDV)",
          a_2:"2", a_3:"3", a_4:"4", a_5:"5", a_6:"6", a_7:"7", a_8:"8", a_9:"9", a_10:"10+",
          c_PL:"–ü–æ–ª—å—â–∞", c_DE:"–ù—ñ–º–µ—á—á–∏–Ω–∞", c_FR:"–§—Ä–∞–Ω—Ü—ñ—è", c_ES:"–Ü—Å–ø–∞–Ω—ñ—è", c_IT:"–Ü—Ç–∞–ª—ñ—è", c_NL:"–ù—ñ–¥–µ—Ä–ª–∞–Ω–¥–∏", c_BE:"–ë–µ–ª—å–≥—ñ—è",
          c_LU:"–õ—é–∫—Å–µ–º–±—É—Ä–≥", c_AT:"–ê–≤—Å—Ç—Ä—ñ—è", c_CZ:"–ß–µ—Ö—ñ—è", c_SK:"–°–ª–æ–≤–∞—á—á–∏–Ω–∞", c_HU:"–£–≥–æ—Ä—â–∏–Ω–∞", c_RO:"–†—É–º—É–Ω—ñ—è",
          c_BG:"–ë–æ–ª–≥–∞—Ä—ñ—è", c_HR:"–•–æ—Ä–≤–∞—Ç—ñ—è", c_SI:"–°–ª–æ–≤–µ–Ω—ñ—è", c_LT:"–õ–∏—Ç–≤–∞", c_LV:"–õ–∞—Ç–≤—ñ—è", c_EE:"–ï—Å—Ç–æ–Ω—ñ—è",
          c_FI:"–§—ñ–Ω–ª—è–Ω–¥—ñ—è", c_SE:"–®–≤–µ—Ü—ñ—è", c_DK:"–î–∞–Ω—ñ—è", c_IE:"–Ü—Ä–ª–∞–Ω–¥—ñ—è", c_PT:"–ü–æ—Ä—Ç—É–≥–∞–ª—ñ—è", c_GR:"–ì—Ä–µ—Ü—ñ—è",
          c_CY:"–ö—ñ–ø—Ä", c_MT:"–ú–∞–ª—å—Ç–∞",
          c_UK:"–í–µ–ª–∏–∫–∞ –ë—Ä–∏—Ç–∞–Ω—ñ—è",
          c_UA:"–£–∫—Ä–∞—ó–Ω–∞",
          withTrailer:"–ó –ø—Ä–∏—á–µ–ø–æ–º",
          trailerPlate:"–ù–æ–º–µ—Ä –ø—Ä–∏—á–µ–ø–∞",
          gvwr:"–ü–æ–≤–Ω–∞ –º–∞—Å–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ –∑–∞—Å–æ–±—É",
          gtw:"–ü–æ–≤–Ω–∞ –º–∞—Å–∞ –ø—Ä–∏—á–µ–ø–∞",
          w_35:"‚â§ 3,5 —Ç",
          w_3575:"3,5‚Äì7,5 —Ç",
          w_7512:"7,5‚Äì12 —Ç",
          w_12p:"> 12 —Ç"
        },
        ru: {
          locate:"–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è", share:"–ü–æ–¥–µ–ª–∏—Ç—å—Å—è", map:"–ö–∞—Ä—Ç–∞",
          coord:"–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã:", disclaimer:"–ü—Ä–æ—Ç–æ—Ç–∏–ø. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–ø–ª–∞—Ç.",
          note:"MVP –¥–µ–º–æ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–ø–ª–∞—Ç).",
          vehicle:"–ê–≤—Ç–æ–º–æ–±–∏–ª—å", vehicleTitle:"–ü—Ä–æ—Ñ–∏–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è",
          vehicleDesc:"–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¢–° –¥–ª—è –¥–æ—Ä–æ–≥, —Ç–æ–ø–ª–∏–≤–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è.",
          plate:"–ù–æ–º–µ—Ä",
          country:"–°—Ç—Ä–∞–Ω–∞",
          type:"–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞ (–ï–°)",
          fuelType:"–¢–∏–ø —Ç–æ–ø–ª–∏–≤–∞",
          emission:"–≠–∫–æ-–∫–ª–∞—Å—Å",
          axles:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å–µ–π",
          save:"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
          reset:"–°–±—Ä–æ—Å–∏—Ç—å –¥–µ–º–æ",
          saved:"–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ",
          resetDone:"–°–±—Ä–æ—à–µ–Ω–æ",
          reqHint:"–ü–æ–¥—Å–∫–∞–∑–∫–∞: –û—Å–∏ –≤–∞–∂–Ω—ã –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –¢–° –∏ –¢–° —Å –ø—Ä–∏—Ü–µ–ø–∞–º–∏.",
          nav:"–ù–∞–≤–∏–≥–∞—Ç–æ—Ä", tolls:"–û–ø–ª–∞—Ç–∞ –¥–æ—Ä–æ–≥", fuel:"–ó–∞–ø—Ä–∞–≤–∫–∞", hotels:"–û—Ç–µ–ª–∏", nearby:"–ú–µ—Å—Ç–∞ —Ä—è–¥–æ–º",
          mapPlaceholder:"–ó–∞–≥–ª—É—à–∫–∞ –∫–∞—Ä—Ç—ã. –ù–∞–∂–º–∏ ‚Äú–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è‚Äù, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é, –∏ –≤—ã–±–∏—Ä–∞–π –º–æ–¥—É–ª–∏.",
          posUnknown:"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ (–Ω–∞–∂–º–∏ –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è)",
          demoPay:"–î–µ–º–æ –æ–ø–ª–∞—Ç—ã –¥–æ—Ä–æ–≥ (stub).",
          demoFuel:"–î–µ–º–æ –∑–∞–ø—Ä–∞–≤–∫–∏ (stub).",
          demoHotel:"–î–µ–º–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (stub).",
          demoNearby:"–î–µ–º–æ –º–∞—Ä—à—Ä—É—Ç–∞ –∫ –º–µ—Å—Ç—É (stub).",
          gL:"L (–º–æ–ø–µ–¥—ã –∏ –º–æ—Ç–æ—Ü–∏–∫–ª—ã)",
          gM:"M (–ø–∞—Å—Å–∞–∂–∏—Ä—Å–∫–∏–µ)",
          gN:"N (–≥—Ä—É–∑–æ–≤—ã–µ)",
          select:"–í—ã–±–µ—Ä–∏—Ç–µ‚Ä¶",
          f_diesel:"–î–∏–∑–µ–ª—å",
          f_petrol:"–ë–µ–Ω–∑–∏–Ω",
          f_lpg:"LPG (–≥–∞–∑)",
          f_cng:"CNG (–º–µ—Ç–∞–Ω)",
          f_lng:"LNG (—Å–∂–∏–∂. –≥–∞–∑)",
          f_electric:"–≠–ª–µ–∫—Ç—Ä–æ",
          f_hydrogen:"–í–æ–¥–æ—Ä–æ–¥",
          f_hybrid:"–ì–∏–±—Ä–∏–¥",
          e_euro0:"Euro 0 / –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ",
          e_euro1:"Euro 1",
          e_euro2:"Euro 2",
          e_euro3:"Euro 3",
          e_euro4:"Euro 4",
          e_euro5:"Euro 5",
          e_euro6:"Euro 6",
          e_euro6d:"Euro 6d",
          e_euroVI:"Euro VI (HDV)",
          a_2:"2", a_3:"3", a_4:"4", a_5:"5", a_6:"6", a_7:"7", a_8:"8", a_9:"9", a_10:"10+",
          c_PL:"–ü–æ–ª—å—à–∞", c_DE:"–ì–µ—Ä–º–∞–Ω–∏—è", c_FR:"–§—Ä–∞–Ω—Ü–∏—è", c_ES:"–ò—Å–ø–∞–Ω–∏—è", c_IT:"–ò—Ç–∞–ª–∏—è", c_NL:"–ù–∏–¥–µ—Ä–ª–∞–Ω–¥—ã", c_BE:"–ë–µ–ª—å–≥–∏—è",
          c_LU:"–õ—é–∫—Å–µ–º–±—É—Ä–≥", c_AT:"–ê–≤—Å—Ç—Ä–∏—è", c_CZ:"–ß–µ—Ö–∏—è", c_SK:"–°–ª–æ–≤–∞–∫–∏—è", c_HU:"–í–µ–Ω–≥—Ä–∏—è", c_RO:"–†—É–º—ã–Ω–∏—è",
          c_BG:"–ë–æ–ª–≥–∞—Ä–∏—è", c_HR:"–•–æ—Ä–≤–∞—Ç–∏—è", c_SI:"–°–ª–æ–≤–µ–Ω–∏—è", c_LT:"–õ–∏—Ç–≤–∞", c_LV:"–õ–∞—Ç–≤–∏—è", c_EE:"–≠—Å—Ç–æ–Ω–∏—è",
          c_FI:"–§–∏–Ω–ª—è–Ω–¥–∏—è", c_SE:"–®–≤–µ—Ü–∏—è", c_DK:"–î–∞–Ω–∏—è", c_IE:"–ò—Ä–ª–∞–Ω–¥–∏—è", c_PT:"–ü–æ—Ä—Ç—É–≥–∞–ª–∏—è", c_GR:"–ì—Ä–µ—Ü–∏—è",
          c_CY:"–ö–∏–ø—Ä", c_MT:"–ú–∞–ª—å—Ç–∞",
          c_UK:"–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è",
          c_UA:"–£–∫—Ä–∞–∏–Ω–∞",
          withTrailer:"–° –ø—Ä–∏—Ü–µ–ø–æ–º",
          trailerPlate:"–ù–æ–º–µ—Ä –ø—Ä–∏—Ü–µ–ø–∞",
          gvwr:"–ü–æ–ª–Ω–∞—è –º–∞—Å—Å–∞ –¢–°",
          gtw:"–ü–æ–ª–Ω–∞—è –º–∞—Å—Å–∞ –ø—Ä–∏—Ü–µ–ø–∞",
          w_35:"‚â§ 3,5 —Ç",
          w_3575:"3,5‚Äì7,5 —Ç",
          w_7512:"7,5‚Äì12 —Ç",
          w_12p:"> 12 —Ç"
        }
      };

      function t(key){
        var lang = $("lang").value || "uk";
        var dict = I18N[lang] || I18N.en;
        return (dict && dict[key]) ? dict[key] : (I18N.en[key] || key);
      }

      // ---- NEW refined SVG icons: red vehicle on light-blue background with wide border ----
      function svgIcon(kind){
        // 76x76 viewBox
        // Wide border: stroke-width 6 around the rect, plus inner padding.
        var bg = '<rect x="3" y="3" width="70" height="70" rx="14" fill="var(--iconBg)" stroke="var(--iconBorder)" stroke-width="6"/>';
        if(kind === "moto"){
          return '' +
            '<svg viewBox="0 0 76 76" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">' +
              bg +
              '<circle cx="24" cy="50" r="9" fill="none" stroke="var(--iconRed2)" stroke-width="4"/>' +
              '<circle cx="54" cy="50" r="9" fill="none" stroke="var(--iconRed2)" stroke-width="4"/>' +
              '<path d="M26 50h13l8-16h10" fill="none" stroke="var(--iconRed1)" stroke-width="5" stroke-linecap="round" stroke-linejoin="round"/>' +
              '<path d="M38 34l-6 12" fill="none" stroke="var(--iconRed3)" stroke-width="5" stroke-linecap="round"/>' +
              '<path d="M40 34h12" fill="none" stroke="var(--iconHi)" stroke-width="4" stroke-linecap="round" opacity=".9"/>' +
              '<path d="M46 28c4 0 6 2 7 5" fill="none" stroke="var(--iconRed3)" stroke-width="4" stroke-linecap="round" opacity=".9"/>' +
            '</svg>';
        }
        if(kind === "bus"){
          return '' +
            '<svg viewBox="0 0 76 76" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">' +
              bg +
              '<rect x="16" y="24" width="44" height="28" rx="12" fill="none" stroke="var(--iconRed1)" stroke-width="5"/>' +
              '<rect x="22" y="30" width="24" height="10" rx="4" fill="var(--iconHi)" opacity=".9" stroke="var(--iconRed3)" stroke-width="2"/>' +
              '<rect x="48" y="30" width="8" height="18" rx="4" fill="var(--iconHi)" opacity=".9" stroke="var(--iconRed3)" stroke-width="2"/>' +
              '<circle cx="28" cy="54" r="7" fill="none" stroke="var(--iconRed2)" stroke-width="4"/>' +
              '<circle cx="52" cy="54" r="7" fill="none" stroke="var(--iconRed2)" stroke-width="4"/>' +
              '<path d="M18 42h40" stroke="var(--iconRed3)" stroke-width="3" opacity=".7"/>' +
            '</svg>';
        }
        if(kind === "truck"){
          return '' +
            '<svg viewBox="0 0 76 76" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">' +
              bg +
              '<rect x="14" y="34" width="28" height="16" rx="7" fill="none" stroke="var(--iconRed1)" stroke-width="5"/>' +
              '<rect x="42" y="30" width="20" height="20" rx="7" fill="var(--iconHi)" opacity=".9" stroke="var(--iconRed3)" stroke-width="3"/>' +
              '<rect x="46" y="34" width="9" height="7" rx="3" fill="var(--iconBg)" opacity=".9" stroke="var(--iconRed2)" stroke-width="2"/>' +
              '<circle cx="26" cy="54" r="8" fill="none" stroke="var(--iconRed2)" stroke-width="4"/>' +
              '<circle cx="54" cy="54" r="8" fill="none" stroke="var(--iconRed2)" stroke-width="4"/>' +
              '<path d="M14 50h48" stroke="var(--iconRed3)" stroke-width="3" opacity=".7"/>' +
            '</svg>';
        }
        // car default
        return '' +
          '<svg viewBox="0 0 76 76" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">' +
            bg +
            '<rect x="14" y="38" width="48" height="16" rx="10" fill="none" stroke="var(--iconRed1)" stroke-width="5"/>' +
            '<path d="M22 38c4-10 10-14 19-14h6c9 0 15 4 19 14" fill="var(--iconHi)" opacity=".9" stroke="var(--iconRed3)" stroke-width="3" />' +
            '<circle cx="26" cy="54" r="8" fill="none" stroke="var(--iconRed2)" stroke-width="4"/>' +
            '<circle cx="50" cy="54" r="8" fill="none" stroke="var(--iconRed2)" stroke-width="4"/>' +
          '</svg>';
      }

      // ---- EU vehicle categories (without trailers and agri). Mopeds+motorcycles unified. ----
      // Kind => which icon to show.
      var EU_TYPES = [
        { groupKey:"gL", kind:"moto", items: [
          { code:"L", labelEn:"L ‚Äî Mopeds & motorcycles (2/3-wheel)", labelUk:"L ‚Äî –ú–æ–ø–µ–¥–∏ —Ç–∞ –º–æ—Ç–æ—Ü–∏–∫–ª–∏ (2/3-–∫–æ–ª—ñ—Å–Ω—ñ)", labelRu:"L ‚Äî –ú–æ–ø–µ–¥—ã –∏ –º–æ—Ç–æ—Ü–∏–∫–ª—ã (2/3-–∫–æ–ª—ë—Å–Ω—ã–µ)" }
        ]},
        { groupKey:"gM", kind:"bus", items: [
          { code:"M1", labelEn:"M1 ‚Äî passenger car (‚â§8 seats)", labelUk:"M1 ‚Äî –ª–µ–≥–∫–æ–≤–∏–π (‚â§8 –º—ñ—Å—Ü—å)", labelRu:"M1 ‚Äî –ª–µ–≥–∫–æ–≤–æ–π (‚â§8 –º–µ—Å—Ç)" },
          { code:"M2", labelEn:"M2 ‚Äî bus (‚â§5t)", labelUk:"M2 ‚Äî –∞–≤—Ç–æ–±—É—Å (‚â§5—Ç)", labelRu:"M2 ‚Äî –∞–≤—Ç–æ–±—É—Å (‚â§5—Ç)" },
          { code:"M3", labelEn:"M3 ‚Äî bus (>5t)", labelUk:"M3 ‚Äî –∞–≤—Ç–æ–±—É—Å (>5—Ç)", labelRu:"M3 ‚Äî –∞–≤—Ç–æ–±—É—Å (>5—Ç)" }
        ]},
        { groupKey:"gN", kind:"truck", items: [
          { code:"N1", labelEn:"N1 ‚Äî goods (‚â§3.5t)", labelUk:"N1 ‚Äî –≤–∞–Ω—Ç–∞–∂–Ω–∏–π (‚â§3,5—Ç)", labelRu:"N1 ‚Äî –≥—Ä—É–∑–æ–≤–æ–π (‚â§3,5—Ç)" },
          { code:"N2", labelEn:"N2 ‚Äî goods (3.5‚Äì12t)", labelUk:"N2 ‚Äî –≤–∞–Ω—Ç–∞–∂–Ω–∏–π (3,5‚Äì12—Ç)", labelRu:"N2 ‚Äî –≥—Ä—É–∑–æ–≤–æ–π (3,5‚Äì12—Ç)" },
          { code:"N3", labelEn:"N3 ‚Äî goods (>12t)", labelUk:"N3 ‚Äî –≤–∞–Ω—Ç–∞–∂–Ω–∏–π (>12—Ç)", labelRu:"N3 ‚Äî –≥—Ä—É–∑–æ–≤–æ–π (>12—Ç)" }
        ]}
      ];

      function getLang(){ return $("lang").value || "uk"; }
      function typeLabel(it){
        var lang = getLang();
        if(lang === "uk") return it.labelUk;
        if(lang === "ru") return it.labelRu;
        return it.labelEn;
      }

      function openDrawer(){
        $("drawer").classList.add("open");
        $("drawer").setAttribute("aria-hidden","false");
        $("backdrop").classList.add("show");
      }
      function closeDrawer(){
        $("drawer").classList.remove("open");
        $("drawer").setAttribute("aria-hidden","true");
        $("backdrop").classList.remove("show");
      }

      function getPos(){
        var raw = safeGet(KEY_POS);
        if(!raw) return null;
        try { return JSON.parse(raw); } catch(e){ return null; }
      }
      function setPos(pos){
        safeSet(KEY_POS, JSON.stringify(pos));
        $("coord").textContent = pos.lat.toFixed(5)+", "+pos.lng.toFixed(5);
      }

      function locate(){
        $("pillStatus").textContent = "‚Ä¶";
        if(!navigator.geolocation){
          $("pillStatus").textContent = "Demo";
          toast("No geolocation available");
          return;
        }
        navigator.geolocation.getCurrentPosition(
          function(p){
            setPos({lat:p.coords.latitude, lng:p.coords.longitude});
            $("pillStatus").textContent = "OK";
            toast("Location set");
          },
          function(){
            $("pillStatus").textContent = "Demo";
            toast("Location denied / unavailable");
          },
          { enableHighAccuracy:true, timeout:10000, maximumAge:60000 }
        );
      }

      function shareLink(){
        var url = location.href;
        if(navigator.clipboard && navigator.clipboard.writeText){
          navigator.clipboard.writeText(url).then(function(){ toast("Copied"); })
            .catch(function(){ prompt("Copy link:", url); });
        } else {
          prompt("Copy link:", url);
        }
      }

      function getVehicle(){
        var raw = safeGet(KEY_VEH);
        if(!raw) return {
          plate:"AB1234CD",
          country:"PL",
          type:"N3",
          fuelType:"diesel",
          emission:"euro6",
          axles:"5",
          withTrailer:false,
          gvwr:"w_12p",   // vehicle weight bucket
          trailerPlate:"",
          gtw:"w_7512"    // trailer weight bucket
        };
        try {
          var v = JSON.parse(raw);
          if(typeof v.withTrailer !== "boolean") v.withTrailer = !!v.withTrailer;
          return v;
        } catch(e){ return null; }
      }
      function setVehicle(v){ safeSet(KEY_VEH, JSON.stringify(v)); }

      function setActive(route){
        $all(".navItem").forEach(function(btn){
          btn.classList.toggle("active", btn.getAttribute("data-route") === route);
        });
      }

      function getRouteFromHash(){
        var h = (location.hash || "").replace("#","");
        return ROUTES.indexOf(h) >= 0 ? h : "vehicle";
      }

      function applyTexts(){
        $("tLocate").textContent = t("locate");
        $("tShare").textContent = t("share");
        $("tMapTitle").textContent = t("map");
        $("tMapPlaceholder").textContent = t("mapPlaceholder");
        $("tCoordLabel").textContent = t("coord");
        $("tDisclaimer").textContent = t("disclaimer");
        $("tDrawerNote").textContent = t("note");

        $("tNavVehicle").textContent = t("vehicle");
        $("tNavNav").textContent = t("nav");
        $("tNavTolls").textContent = t("tolls");
        $("tNavFuel").textContent = t("fuel");
        $("tNavHotels").textContent = t("hotels");
        $("tNavNearby").textContent = t("nearby");
      }

      // ---- Option builders (translated) ----
      var COUNTRY_CODES = ["PL","DE","FR","ES","IT","NL","BE","LU","AT","CZ","SK","HU","RO","BG","HR","SI","LT","LV","EE","FI","SE","DK","IE","PT","GR","CY","MT","UK","UA"];

      function buildCountryOptions(selected){
        var html = '<option value="" disabled>' + escapeHtml(t("select")) + '</option>';
        for (var i=0;i<COUNTRY_CODES.length;i++){
          var cc = COUNTRY_CODES[i];
          var key = "c_" + cc;
          var sel = (cc === selected) ? " selected" : "";
          html += '<option value="' + cc + '"' + sel + '>' + escapeHtml(t(key)) + ' (' + cc + ')</option>';
        }
        return html;
      }

      var FUEL_KEYS = ["diesel","petrol","lpg","cng","lng","electric","hydrogen","hybrid"];
      function buildFuelOptions(selected){
        var html = '<option value="" disabled>' + escapeHtml(t("select")) + '</option>';
        for (var i=0;i<FUEL_KEYS.length;i++){
          var fk = FUEL_KEYS[i];
          var key = "f_" + fk;
          var sel = (fk === selected) ? " selected" : "";
          html += '<option value="' + fk + '"' + sel + '>' + escapeHtml(t(key)) + '</option>';
        }
        return html;
      }

      var ECO_KEYS = ["euro0","euro1","euro2","euro3","euro4","euro5","euro6","euro6d","euroVI"];
      function buildEcoOptions(selected){
        var html = '<option value="" disabled>' + escapeHtml(t("select")) + '</option>';
        for (var i=0;i<ECO_KEYS.length;i++){
          var ek = ECO_KEYS[i];
          var key = "e_" + ek;
          var sel = (ek === selected) ? " selected" : "";
          html += '<option value="' + ek + '"' + sel + '>' + escapeHtml(t(key)) + '</option>';
        }
        return html;
      }

      var AXLE_KEYS = ["2","3","4","5","6","7","8","9","10+"];
      function axleKeyToI18nKey(a){
        if(a === "10+") return "a_10";
        return "a_" + a;
      }
      function buildAxleOptions(selected){
        var html = '<option value="" disabled>' + escapeHtml(t("select")) + '</option>';
        for (var i=0;i<AXLE_KEYS.length;i++){
          var a = AXLE_KEYS[i];
          var key = axleKeyToI18nKey(a);
          var sel = (a === selected) ? " selected" : "";
          html += '<option value="' + escapeHtml(a) + '"' + sel + '>' + escapeHtml(t(key)) + '</option>';
        }
        return html;
      }

      // Weight buckets required by you
      var WEIGHT_KEYS = ["w_35","w_3575","w_7512","w_12p"];
      function buildWeightOptions(selected){
        var html = '<option value="" disabled>' + escapeHtml(t("select")) + '</option>';
        for (var i=0;i<WEIGHT_KEYS.length;i++){
          var wk = WEIGHT_KEYS[i];
          var sel = (wk === selected) ? " selected" : "";
          html += '<option value="' + wk + '"' + sel + '>' + escapeHtml(t(wk)) + '</option>';
        }
        return html;
      }

      // ---- Custom vehicle type dropdown with icons ----
      function findType(code){
        for (var g=0; g<EU_TYPES.length; g++){
          for (var i=0; i<EU_TYPES[g].items.length; i++){
            if(EU_TYPES[g].items[i].code === code) return { group: EU_TYPES[g], item: EU_TYPES[g].items[i] };
          }
        }
        return null;
      }

      function typeIcon(kind){
        if(kind === "moto") return svgIcon("moto");
        if(kind === "bus") return svgIcon("bus");
        if(kind === "truck") return svgIcon("truck");
        return svgIcon("car");
      }

      function renderVehicleTypeSelect(selectedCode){
        var found = findType(selectedCode) || findType("N3");
        var kind = found ? found.group.kind : "truck";
        var label = found ? typeLabel(found.item) : "N3";
        var code = found ? found.item.code : "N3";

        var menu = "";
        for (var g=0; g<EU_TYPES.length; g++){
          var grp = EU_TYPES[g];
          menu += '<div class="vgroup">' + escapeHtml(t(grp.groupKey)) + '</div>';
          for (var i=0; i<grp.items.length; i++){
            var it = grp.items[i];
            var active = (it.code === selectedCode) ? " active" : "";
            menu += '' +
              '<div class="vopt' + active + '" role="option" tabindex="0" data-code="' + escapeHtml(it.code) + '">' +
                '<div class="vselectThumb">' + typeIcon(grp.kind) + '</div>' +
                '<div class="vselectText">' +
                  '<div class="vselectLabel">' + escapeHtml(typeLabel(it)) + '</div>' +
                  '<div class="vselectCode">' + escapeHtml(it.code) + '</div>' +
                '</div>' +
              '</div>';
          }
        }

        return '' +
          '<div class="vselect" id="vehTypeSelect">' +
            '<button type="button" class="vselectBtn" id="vehTypeBtn" aria-haspopup="listbox" aria-expanded="false">' +
              '<div class="vselectThumb" id="vehTypeThumb">' + typeIcon(kind) + '</div>' +
              '<div class="vselectText">' +
                '<div class="vselectLabel" id="vehTypeLabel">' + escapeHtml(label) + '</div>' +
                '<div class="vselectCode" id="vehTypeCode">' + escapeHtml(code) + '</div>' +
              '</div>' +
              '<div class="vselectCaret">‚ñæ</div>' +
            '</button>' +
            '<div class="vselectMenu" id="vehTypeMenu" role="listbox" aria-label="Vehicle type">' +
              menu +
            '</div>' +
            '<input type="hidden" id="vehType" value="' + escapeHtml(code) + '">' +
          '</div>';
      }

      function wireVehicleTypeSelect(){
        var root = $("vehTypeSelect");
        if(!root) return;

        var btn = $("vehTypeBtn");

        function open(){
          root.classList.add("open");
          btn.setAttribute("aria-expanded","true");
          var active = root.querySelector(".vopt.active");
          if(active) active.focus();
        }
        function close(){
          root.classList.remove("open");
          btn.setAttribute("aria-expanded","false");
        }
        function toggle(){
          if(root.classList.contains("open")) close();
          else open();
        }

        btn.addEventListener("click", function(e){
          e.preventDefault();
          toggle();
        });

        document.addEventListener("click", function(e){
          if(!root.contains(e.target)) close();
        }, { passive:true });

        function selectCode(code){
          var res = findType(code);
          if(!res) return;
          $("vehType").value = code;
          $("vehTypeLabel").textContent = typeLabel(res.item);
          $("vehTypeCode").textContent = code;
          $("vehTypeThumb").innerHTML = typeIcon(res.group.kind);

          $all("#vehTypeMenu .vopt").forEach(function(el){
            el.classList.toggle("active", el.getAttribute("data-code") === code);
          });

          close();
        }

        $all("#vehTypeMenu .vopt").forEach(function(opt){
          opt.addEventListener("click", function(){
            selectCode(opt.getAttribute("data-code"));
          });
          opt.addEventListener("keydown", function(ev){
            if(ev.key === "Enter" || ev.key === " "){
              ev.preventDefault();
              selectCode(opt.getAttribute("data-code"));
            }
            if(ev.key === "Escape"){
              ev.preventDefault();
              close();
              btn.focus();
            }
          });
        });

        btn.addEventListener("keydown", function(ev){
          if(ev.key === "Escape"){
            ev.preventDefault();
            close();
          }
        });
      }

      // ---- Demo data for other pages (unchanged MVP) ----
      var DEMO = {
        tolls: [
          { name:"A2 Demo Segment", from:"Poznan", to:"Warsaw", country:"PL", class:"N3", axles:5, estimate:"38.5 EUR" },
          { name:"A1 Demo Segment", from:"Lodz", to:"Gdansk", country:"PL", class:"N2", axles:4, estimate:"22.0 EUR" }
        ],
        fuel: [
          { name:"FuelStop A1", brand:"PartnerX", city:"Warsaw", discount:"-8%", price:"1.54 EUR/L" },
          { name:"TruckFuel Hub", brand:"PartnerY", city:"Lodz", discount:"-6%", price:"1.49 EUR/L" },
          { name:"Highway Diesel Point", brand:"PartnerZ", city:"Poznan", discount:"-7%", price:"1.57 EUR/L" }
        ],
        hotels: [
          { name:"Truck Rest Hotel", city:"Warsaw", type:"Motel", stars:3, parking:true },
          { name:"Highway Inn", city:"Lodz", type:"Hotel", stars:4, parking:true },
          { name:"City Sleep", city:"Poznan", type:"Hotel", stars:3, parking:false }
        ],
        nearby: [
          { name:"Old Town", city:"Warsaw", category:"Sightseeing", open:true },
          { name:"Museum of Transport", city:"Lodz", category:"Museum", open:false },
          { name:"City Park", city:"Poznan", category:"Nature", open:true }
        ]
      };

      function render(route){
        if(ROUTES.indexOf(route) < 0) route = "vehicle";
        setActive(route);

        $("viewPill").textContent = "MVP";
        $("viewTitle").textContent =
          route === "vehicle" ? t("vehicle") :
          route === "navigator" ? t("nav") :
          route === "tolls" ? t("tolls") :
          route === "fuel" ? t("fuel") :
          route === "hotels" ? t("hotels") :
          t("nearby");

        var pos = getPos();
        if(pos) $("coord").textContent = pos.lat.toFixed(5)+", "+pos.lng.toFixed(5);

        // ----- Vehicle -----
        if(route === "vehicle"){
          var v = getVehicle();

          var trailerFields = '';
          if(v.withTrailer){
            trailerFields =
              '<div class="field"><div class="label">' + escapeHtml(t("trailerPlate")) + '</div>' +
                '<input id="vehTrailerPlate" class="input" value="' + escapeHtml(v.trailerPlate || "") + '" placeholder="TR1234XX">' +
              '</div>' +
              '<div class="field"><div class="label">' + escapeHtml(t("gtw")) + '</div>' +
                '<select id="vehGtw" class="input">' + buildWeightOptions(v.gtw || "w_7512") + '</select>' +
              '</div>';
          }

          $("view").innerHTML =
            '<h3 class="sectionTitle">' + escapeHtml(t("vehicleTitle")) + '</h3>' +
            '<div class="item">' +
              '<div class="itemSub">' + escapeHtml(t("vehicleDesc")) + '</div>' +
              '<div class="hr"></div>' +

              '<div class="field"><div class="label">' + escapeHtml(t("plate")) + '</div>' +
                '<input id="vehPlate" class="input" value="' + escapeHtml(v.plate || "") + '" placeholder="AB1234CD">' +
              '</div>' +

              '<div class="field"><div class="label">' + escapeHtml(t("country")) + '</div>' +
                '<select id="vehCountry" class="input">' + buildCountryOptions(v.country || "PL") + '</select>' +
              '</div>' +

              '<div class="field"><div class="label">' + escapeHtml(t("type")) + '</div>' +
                renderVehicleTypeSelect(v.type || "N3") +
              '</div>' +

              '<div class="field"><div class="label">' + escapeHtml(t("fuelType")) + '</div>' +
                '<select id="vehFuel" class="input">' + buildFuelOptions(v.fuelType || "diesel") + '</select>' +
              '</div>' +

              '<div class="field"><div class="label">' + escapeHtml(t("emission")) + '</div>' +
                '<select id="vehEmission" class="input">' + buildEcoOptions(v.emission || "euro6") + '</select>' +
              '</div>' +

              '<div class="field"><div class="label">' + escapeHtml(t("axles")) + '</div>' +
                '<select id="vehAxles" class="input">' + buildAxleOptions(v.axles || "5") + '</select>' +
              '</div>' +

              '<div class="field"><div class="label">' + escapeHtml(t("gvwr")) + '</div>' +
                '<select id="vehGvwr" class="input">' + buildWeightOptions(v.gvwr || "w_12p") + '</select>' +
              '</div>' +

              '<div class="row">' +
                '<button type="button" class="toggleBtn' + (v.withTrailer ? ' on' : '') + '" id="btnWithTrailer">' +
                  '<span class="toggleDot" aria-hidden="true"></span>' +
                  '<span>' + escapeHtml(t("withTrailer")) + '</span>' +
                '</button>' +
              '</div>' +

              '<div id="trailerBlock">' + trailerFields + '</div>' +

              '<div class="hint">' + escapeHtml(t("reqHint")) + '</div>' +

              '<div class="row">' +
                '<button class="btn" id="btnVehSave">üíæ ' + escapeHtml(t("save")) + '</button>' +
                '<button class="btnGhost" id="btnVehReset">‚Ü∫ ' + escapeHtml(t("reset")) + '</button>' +
              '</div>' +
            '</div>';

          wireVehicleTypeSelect();

          function rerenderTrailerBlock(withTrailer){
            var block = $("trailerBlock");
            if(!block) return;
            if(!withTrailer){
              block.innerHTML = "";
              return;
            }
            block.innerHTML =
              '<div class="field"><div class="label">' + escapeHtml(t("trailerPlate")) + '</div>' +
                '<input id="vehTrailerPlate" class="input" value="' + escapeHtml((getVehicle().trailerPlate || "")) + '" placeholder="TR1234XX">' +
              '</div>' +
              '<div class="field"><div class="label">' + escapeHtml(t("gtw")) + '</div>' +
                '<select id="vehGtw" class="input">' + buildWeightOptions((getVehicle().gtw || "w_7512")) + '</select>' +
              '</div>';
          }

          $("btnWithTrailer").addEventListener("click", function(){
            var cur = getVehicle();
            cur.withTrailer = !cur.withTrailer;
            // keep current form values to not lose edits
            cur.plate = $("vehPlate").value.trim();
            cur.country = ($("vehCountry").value || "PL").trim();
            cur.type = ($("vehType").value || "N3").trim();
            cur.fuelType = ($("vehFuel").value || "diesel").trim();
            cur.emission = ($("vehEmission").value || "euro6").trim();
            cur.axles = ($("vehAxles").value || "5").trim();
            cur.gvwr = ($("vehGvwr").value || "w_12p").trim();

            setVehicle(cur);

            // update button style + trailer block without full render
            this.classList.toggle("on", cur.withTrailer);
            rerenderTrailerBlock(cur.withTrailer);
          });

          $("btnVehSave").addEventListener("click", function(){
            var nv = {
              plate: $("vehPlate").value.trim(),
              country: ($("vehCountry").value || "PL").trim(),
              type: ($("vehType").value || "N3").trim(),
              fuelType: ($("vehFuel").value || "diesel").trim(),
              emission: ($("vehEmission").value || "euro6").trim(),
              axles: ($("vehAxles").value || "5").trim(),
              gvwr: ($("vehGvwr").value || "w_12p").trim(),
              withTrailer: $("btnWithTrailer").classList.contains("on"),
              trailerPlate: "",
              gtw: "w_7512"
            };

            if(nv.withTrailer){
              nv.trailerPlate = ($("vehTrailerPlate") ? $("vehTrailerPlate").value.trim() : "");
              nv.gtw = ($("vehGtw") ? $("vehGtw").value : "w_7512");
            }

            setVehicle(nv);
            toast(t("saved"));
          });

          $("btnVehReset").addEventListener("click", function(){
            try { localStorage.removeItem(KEY_VEH); } catch(e){}
            toast(t("resetDone"));
            render("vehicle");
          });

          return;
        }

        // ----- Navigator -----
        if(route === "navigator"){
          var posText = pos ? (pos.lat.toFixed(5)+", "+pos.lng.toFixed(5)) : t("posUnknown");
          $("view").innerHTML =
            '<h3 class="sectionTitle">' + escapeHtml(t("nav")) + '</h3>' +
            '<div class="item">' +
              '<div class="itemTitle">Best navigators (shortlist)</div>' +
              '<div class="itemSub">We will integrate multiple providers and choose best per route.</div>' +
              '<div class="row">' +
                '<span class="chip">Google Maps</span><span class="chip">Waze</span><span class="chip">HERE WeGo</span><span class="chip">TomTom</span><span class="chip">Sygic</span>' +
              '</div>' +
            '</div>' +
            '<div class="hr"></div>' +
            '<div class="item">' +
              '<div class="itemTitle">Position</div>' +
              '<div class="itemSub">' + escapeHtml(posText) + '</div>' +
              '<div class="row"><button class="btn" id="btnRouteDemo">‚ñ∂ Route demo</button></div>' +
            '</div>';

          $("btnRouteDemo").addEventListener("click", function(){ toast("Route flow (demo)"); });
          return;
        }

        // ----- Tolls -----
        if(route === "tolls"){
          var listT = DEMO.tolls.map(function(r){
            return ''+
              '<div class="item">'+
                '<div class="itemTop">'+
                  '<div>'+
                    '<div class="itemTitle">'+escapeHtml(r.name)+'</div>'+
                    '<div class="itemSub">'+escapeHtml(r.from)+' ‚Üí '+escapeHtml(r.to)+'</div>'+
                  '</div>'+
                  '<div class="badge">'+escapeHtml(r.estimate)+'</div>'+
                '</div>'+
                '<div class="row">'+
                  '<span class="chip">Class: '+escapeHtml(r.class)+'</span>'+
                  '<span class="chip">Axles: '+escapeHtml(String(r.axles))+'</span>'+
                  '<span class="chip">Country: '+escapeHtml(r.country)+'</span>'+
                '</div>'+
                '<div class="row"><button class="btn payBtn">üõ£Ô∏è '+escapeHtml(t("tolls"))+'</button></div>'+
              '</div>';
          }).join("");

          $("view").innerHTML =
            '<h3 class="sectionTitle">'+escapeHtml(t("tolls"))+'</h3>'+
            '<div class="item"><div class="itemTitle">EETS-ready (phase)</div><div class="itemSub">Demo only. Next: partner integration.</div></div>'+
            '<div class="hr"></div><div class="list">'+listT+'</div>';

          $all(".payBtn").forEach(function(b){
            b.addEventListener("click", function(){ toast(t("demoPay")); });
          });
          return;
        }

        // ----- Fuel -----
        if(route === "fuel"){
          var listF = DEMO.fuel.map(function(s){
            return ''+
              '<div class="item">'+
                '<div class="itemTop">'+
                  '<div>'+
                    '<div class="itemTitle">'+escapeHtml(s.name)+'</div>'+
                    '<div class="itemSub">'+escapeHtml(s.city)+' ‚Ä¢ '+escapeHtml(s.brand)+'</div>'+
                  '</div>'+
                  '<div class="badge">'+escapeHtml(s.discount)+'</div>'+
                '</div>'+
                '<div class="row">'+
                  '<span class="chip">Price: '+escapeHtml(s.price)+'</span>'+
                  '<span class="chip">Discount system</span>'+
                '</div>'+
                '<div class="row"><button class="btn fuelBtn">‚õΩ '+escapeHtml(t("fuel"))+'</button><button class="btnGhost creditBtn">üí≥ Credit</button></div>'+
              '</div>';
          }).join("");

          $("view").innerHTML =
            '<h3 class="sectionTitle">'+escapeHtml(t("fuel"))+'</h3>'+
            '<div class="item"><div class="itemTitle">Discounted fuel</div><div class="itemSub">UTA/DKV/E100-like demo.</div></div>'+
            '<div class="hr"></div><div class="list">'+listF+'</div>';

          $all(".fuelBtn").forEach(function(b){ b.addEventListener("click", function(){ toast(t("demoFuel")); }); });
          $all(".creditBtn").forEach(function(b){ b.addEventListener("click", function(){ toast("Credit (coming soon)"); }); });
          return;
        }

        // ----- Hotels -----
        if(route === "hotels"){
          var listH = DEMO.hotels.map(function(h){
            var stars = new Array((h.stars||3)+1).join("‚òÖ");
            return ''+
              '<div class="item">'+
                '<div class="itemTop">'+
                  '<div>'+
                    '<div class="itemTitle">'+escapeHtml(h.name)+'</div>'+
                    '<div class="itemSub">'+escapeHtml(h.city)+' ‚Ä¢ '+escapeHtml(h.type)+'</div>'+
                  '</div>'+
                  '<div class="badge">'+escapeHtml(stars)+'</div>'+
                '</div>'+
                '<div class="row">'+
                  '<span class="chip">Truck parking: '+(h.parking ? "Yes":"No")+'</span>'+
                  '<span class="chip">Driver rest</span>'+
                '</div>'+
                '<div class="row"><button class="btn hotelBtn">üè® '+escapeHtml(t("hotels"))+'</button></div>'+
              '</div>';
          }).join("");

          $("view").innerHTML =
            '<h3 class="sectionTitle">'+escapeHtml(t("hotels"))+'</h3>'+
            '<div class="item"><div class="itemTitle">Driver rest</div><div class="itemSub">Demo list. Next: booking API.</div></div>'+
            '<div class="hr"></div><div class="list">'+listH+'</div>';

          $all(".hotelBtn").forEach(function(b){ b.addEventListener("click", function(){ toast(t("demoHotel")); }); });
          return;
        }

        // ----- Nearby -----
        if(route === "nearby"){
          var listN = DEMO.nearby.map(function(p){
            return ''+
              '<div class="item">'+
                '<div class="itemTop">'+
                  '<div>'+
                    '<div class="itemTitle">'+escapeHtml(p.name)+'</div>'+
                    '<div class="itemSub">'+escapeHtml(p.category)+' ‚Ä¢ '+escapeHtml(p.city)+'</div>'+
                  '</div>'+
                  '<div class="badge">'+(p.open ? "Open":"Closed")+'</div>'+
                '</div>'+
                '<div class="row">'+
                  '<span class="chip">Tourism</span>'+
                  '<span class="chip">Near you (demo)</span>'+
                '</div>'+
                '<div class="row"><button class="btn nearBtn">üß≠ '+escapeHtml(t("nearby"))+'</button></div>'+
              '</div>';
          }).join("");

          $("view").innerHTML =
            '<h3 class="sectionTitle">'+escapeHtml(t("nearby"))+'</h3>'+
            '<div class="item"><div class="itemTitle">Places nearby</div><div class="itemSub">Demo. Next: Places API.</div></div>'+
            '<div class="hr"></div><div class="list">'+listN+'</div>';

          $all(".nearBtn").forEach(function(b){ b.addEventListener("click", function(){ toast(t("demoNearby")); }); });
          return;
        }
      }

      function buildLangSelect(){
        var sel = $("lang");
        sel.innerHTML = "";
        for (var i=0;i<LANGS.length;i++){
          var l = LANGS[i];
          var opt = document.createElement("option");
          opt.value = l.code;
          opt.textContent = l.label;
          sel.appendChild(opt);
        }

        var saved = safeGet(KEY_LANG);
        var auto = (navigator.language || "uk").toLowerCase();
        auto = auto.indexOf("-") > -1 ? auto.split("-")[0] : auto;
        if(auto === "ua") auto = "uk";

        var initial = saved || auto || "uk";
        var has = LANGS.some(function(x){ return x.code === initial; });
        sel.value = has ? initial : "en";
      }

      function init(){
        buildLangSelect();
        applyTexts();

        var pos = getPos();
        if(pos) $("coord").textContent = pos.lat.toFixed(5)+", "+pos.lng.toFixed(5);

        $("btnMenu").addEventListener("click", openDrawer);
        $("btnClose").addEventListener("click", closeDrawer);
        $("backdrop").addEventListener("click", closeDrawer);

        $all(".navItem").forEach(function(btn){
          btn.addEventListener("click", function(){
            var route = btn.getAttribute("data-route") || "vehicle";
            closeDrawer();
            location.hash = "#"+route;
            render(route);
          });
        });

        $("btnLocate").addEventListener("click", locate);
        $("btnShare").addEventListener("click", shareLink);

        $("lang").addEventListener("change", function(e){
          safeSet(KEY_LANG, e.target.value);
          applyTexts();
          // Re-render to translate dropdown labels/options and vehicle type menu
          render(getRouteFromHash());
        });

        window.addEventListener("hashchange", function(){
          render(getRouteFromHash());
        });

        $("pillStatus").textContent = "Demo";
        render(getRouteFromHash());
      }

      init();
    })();
  </script>
</body>
</html>
